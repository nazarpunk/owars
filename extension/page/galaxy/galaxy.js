"use strict";(()=>{const e=document.querySelector("table[width='570']");if(!e)return;const t=e.querySelector("td.c[colspan='7']");if(!t)return;const n=t.textContent.match(/(\d+):(\d+)/);if(!n||3!==n.length)return;const[,r,o]=n,a=[];e.querySelectorAll("tr").forEach(e=>{if(7!==e.children.length)return;const t=e.children,n=t[0].querySelector("a");if(!n)return;const s=[];let l=0,c=0;t[3].querySelectorAll("img").forEach(e=>{const t=e.alt.trim();if(s.push(t),"Поле обломков"===t){const t=e.parentElement.getAttribute("onmouseover")||"",n=/^.+Титан:<\/th><th>(.*)<\/th><\/tr><tr><th>Кремний:<\/th><th>(.*)<\/th><\/tr><tr>.+$/gms;l=Number(t.replace(n,"$1").replace(/\./,"")),c=Number(t.replace(n,"$2").replace(/\./,""))}});let i={x:r,y:o,z:n.textContent,planet_name:t[2].textContent.replace("*",""),planet_space:s.join(", "),titanium:l,silicon:c,player:t[4].textContent,aliance:t[5].textContent};a.push(i)});const s=document.querySelector("[name=galaxy]"),l=document.querySelector("[name=system]"),c=document.querySelector("[name=systemRight]");if(s&&l&&c&&null===sessionStorage.getItem("galaxy-grab")){const e=document.createElement("button");e.type="button",e.innerHTML="grab",c.insertAdjacentElement("afterend",e),e.addEventListener("click",e=>{e.preventDefault(),e.stopImmediatePropagation(),sessionStorage.setItem("galaxy-grab","0"),location.reload()})}fetch("http://gorsaldo.online/owars/save.php",{method:"post",body:JSON.stringify(a)}).then(e=>e.json()).then(e=>{const t=sessionStorage.getItem("galaxy-grab");if(t&&s&&l&&c){if(!e.hasOwnProperty("success"))return void alert("Парсинг обломился");if(+t>70)return sessionStorage.setItem("galaxy-grab","0"),void setTimeout(()=>{location.reload()},3e4);sessionStorage.setItem("galaxy-grab",(parseInt(t)+1).toString());let n=+s.value,r=+l.value+1;if(r>499&&(r=1,n+=1),n>15)return void sessionStorage.removeItem("galaxy-grab");s.value=n.toString(),l.value=r.toString(),c.dispatchEvent(new Event("click"))}})})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVuc2lvbi9wYWdlL2dhbGF4eS9nYWxheHkudHMiXSwibmFtZXMiOlsiJHRhYmxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiJGhlYWQiLCJtYXRjaCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwieCIsInkiLCJkYXRhIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCIkdHIiLCJjaGlsZHJlbiIsIiR0ZCIsIiR6IiwicGxhbmV0X3NwYWNlIiwidGl0YW5pdW0iLCJzaWxpY29uIiwiJGltZyIsImFsdCIsInRyaW0iLCJwdXNoIiwic3RyIiwicGFyZW50RWxlbWVudCIsImdldEF0dHJpYnV0ZSIsInJFeHAiLCJOdW1iZXIiLCJyZXBsYWNlIiwib2JqIiwieiIsInBsYW5ldF9uYW1lIiwiam9pbiIsInBsYXllciIsImFsaWFuY2UiLCIkZ2FsYXh5IiwiJHN5c3RlbSIsIiRuZXh0Iiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwiJGJ1dHRvbiIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiaW5uZXJIVE1MIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsInNldEl0ZW0iLCJsb2NhdGlvbiIsInJlbG9hZCIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwiciIsImpzb24iLCJ0aW1lIiwiaGFzT3duUHJvcGVydHkiLCJhbGVydCIsInNldFRpbWVvdXQiLCJwYXJzZUludCIsInRvU3RyaW5nIiwiZyIsInZhbHVlIiwicyIsInJlbW92ZUl0ZW0iLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiXSwibWFwcGluZ3MiOiJhQUFBLE1BQ0MsTUFBTUEsRUFBU0MsU0FBU0MsY0FBYyxzQkFDdEMsSUFBS0YsRUFBUSxPQUViLE1BQU1HLEVBQVFILEVBQU9FLGNBQWMscUJBQ25DLElBQUtDLEVBQU8sT0FFWixNQUFNQyxFQUFRRCxFQUFNRSxZQUFhRCxNQUFNLGVBQ3ZDLElBQUtBLEdBQTBCLElBQWpCQSxFQUFNRSxPQUFjLE9BRWxDLE1BQU8sQ0FBRUMsRUFBR0MsR0FBT0osRUFDYkssRUFBYSxHQUduQlQsRUFBT1UsaUJBQXNDLE1BQU1DLFFBQVFDLElBQzFELEdBQTRCLElBQXhCQSxFQUFJQyxTQUFTUCxPQUFjLE9BQy9CLE1BQU1RLEVBQU1GLEVBQUlDLFNBRVZFLEVBQUtELEVBQUksR0FBR1osY0FBYyxLQUNoQyxJQUFLYSxFQUFJLE9BRVQsTUFBTUMsRUFBeUIsR0FDL0IsSUFBSUMsRUFBVyxFQUNYQyxFQUFXLEVBQ2ZKLEVBQUksR0FBR0osaUJBQWlCLE9BQU9DLFFBQVFRLElBQ3RDLE1BQU1DLEVBQU1ELEVBQUtDLElBQUlDLE9BRXJCLEdBREFMLEVBQWFNLEtBQUtGLEdBQ04sa0JBQVJBLEVBQXlCLENBQzVCLE1BQU1HLEVBQU9KLEVBQUtLLGNBQWVDLGFBQWEsZ0JBQWtCLEdBQzFEQyxFQUFPLDBGQUViVCxFQUFXVSxPQUFPSixFQUFJSyxRQUFRRixFQUFNLE1BQU1FLFFBQVEsS0FBTSxLQUN4RFYsRUFBVVMsT0FBT0osRUFBSUssUUFBUUYsRUFBTSxNQUFNRSxRQUFRLEtBQU0sUUFJekQsSUFBSUMsRUFBTSxDQUNUdEIsRUFBY0EsRUFDZEMsRUFBY0EsRUFDZHNCLEVBQWNmLEVBQUdWLFlBQ2pCMEIsWUFBY2pCLEVBQUksR0FBR1QsWUFBYXVCLFFBQVEsSUFBSyxJQUMvQ1osYUFBY0EsRUFBYWdCLEtBQUssTUFDaENmLFNBQWNBLEVBQ2RDLFFBQWNBLEVBQ2RlLE9BQWNuQixFQUFJLEdBQUdULFlBQ3JCNkIsUUFBY3BCLEVBQUksR0FBR1QsYUFHdEJJLEVBQUthLEtBQUtPLEtBR1gsTUFBTU0sRUFBVWxDLFNBQVNDLGNBQWdDLGlCQUNuRGtDLEVBQVVuQyxTQUFTQyxjQUFnQyxpQkFDbkRtQyxFQUFVcEMsU0FBU0MsY0FBYyxzQkFDdkMsR0FBSWlDLEdBQVdDLEdBQVdDLEdBQW1ELE9BQTFDQyxlQUFlQyxRQUFRLGVBQXlCLENBQ2xGLE1BQU1DLEVBQVV2QyxTQUFTd0MsY0FBYyxVQUN2Q0QsRUFBUUUsS0FBTyxTQUNmRixFQUFRRyxVQUFZLE9BQ3BCTixFQUFNTyxzQkFBc0IsV0FBWUosR0FDeENBLEVBQVFLLGlCQUFpQixRQUFTQyxJQUNqQ0EsRUFBRUMsaUJBQ0ZELEVBQUVFLDJCQUNGVixlQUFlVyxRQUFRLGNBQWUsS0FDdENDLFNBQVNDLFdBSVhDLE1BQU0sd0NBQXlDLENBQzlDQyxPQUFRLE9BQ1JDLEtBQVFDLEtBQUtDLFVBQVUvQyxLQUV0QmdELEtBQUtDLEdBQUtBLEVBQUVDLFFBQ1pGLEtBQUtoRCxJQUNMLE1BQU1tRCxFQUFPdEIsZUFBZUMsUUFBUSxlQUNwQyxHQUFJcUIsR0FBUXpCLEdBQVdDLEdBQVdDLEVBQU8sQ0FDeEMsSUFBSzVCLEVBQUtvRCxlQUFlLFdBRXhCLFlBREFDLE1BQU0scUJBSVAsSUFBS0YsRUFBTyxHQUtYLE9BSkF0QixlQUFlVyxRQUFRLGNBQWUsVUFDdENjLFdBQVcsS0FDVmIsU0FBU0MsVUFDUCxLQUdKYixlQUFlVyxRQUFRLGVBQWdCZSxTQUFTSixHQUFRLEdBQUdLLFlBRTNELElBQUlDLEdBQUsvQixFQUFRZ0MsTUFDaEJDLEdBQUtoQyxFQUFRK0IsTUFBUSxFQU10QixHQUpJQyxFQUFJLE1BQ1BBLEVBQUksRUFDSkYsR0FBSSxHQUVEQSxFQUFJLEdBRVAsWUFEQTVCLGVBQWUrQixXQUFXLGVBSTNCbEMsRUFBUWdDLE1BQVFELEVBQUVELFdBQ2xCN0IsRUFBUStCLE1BQVFDLEVBQUVILFdBQ2xCNUIsRUFBTWlDLGNBQWMsSUFBSUMsTUFBTSxjQXZHbEMiLCJmaWxlIjoiZXh0ZW5zaW9uL3BhZ2UvZ2FsYXh5L2dhbGF4eS5qcyIsInNvdXJjZXNDb250ZW50IjpbIigoKSA9PiB7XG5cdGNvbnN0ICR0YWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHRhYmxlW3dpZHRoPSc1NzAnXWApO1xuXHRpZiAoISR0YWJsZSkgcmV0dXJuO1xuXG5cdGNvbnN0ICRoZWFkID0gJHRhYmxlLnF1ZXJ5U2VsZWN0b3IoYHRkLmNbY29sc3Bhbj0nNyddYCk7XG5cdGlmICghJGhlYWQpIHJldHVybjtcblxuXHRjb25zdCBtYXRjaCA9ICRoZWFkLnRleHRDb250ZW50IS5tYXRjaCgvKFxcZCspOihcXGQrKS8pO1xuXHRpZiAoIW1hdGNoIHx8IG1hdGNoLmxlbmd0aCAhPT0gMykgcmV0dXJuO1xuXG5cdGNvbnN0IFssIHgsIHldICAgPSBtYXRjaCxcblx0ICAgICAgZGF0YToge31bXSA9IFtdO1xuXG5cblx0JHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTFRhYmxlUm93RWxlbWVudD4oYHRyYCkuZm9yRWFjaCgkdHIgPT4ge1xuXHRcdGlmICgkdHIuY2hpbGRyZW4ubGVuZ3RoICE9PSA3KSByZXR1cm47XG5cdFx0Y29uc3QgJHRkID0gJHRyLmNoaWxkcmVuIGFzIEhUTUxDb2xsZWN0aW9uT2Y8SFRNTFRhYmxlUm93RWxlbWVudD47XG5cblx0XHRjb25zdCAkeiA9ICR0ZFswXS5xdWVyeVNlbGVjdG9yKGBhYCk7XG5cdFx0aWYgKCEkeikgcmV0dXJuO1xuXG5cdFx0Y29uc3QgcGxhbmV0X3NwYWNlOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGxldCB0aXRhbml1bSA9IDAsXG5cdFx0ICAgIHNpbGljb24gID0gMFxuXHRcdCR0ZFszXS5xdWVyeVNlbGVjdG9yQWxsKGBpbWdgKS5mb3JFYWNoKCRpbWcgPT4ge1xuXHRcdFx0Y29uc3QgYWx0ID0gJGltZy5hbHQudHJpbSgpO1xuXHRcdFx0cGxhbmV0X3NwYWNlLnB1c2goYWx0KTtcblx0XHRcdGlmIChhbHQgPT09IGDQn9C+0LvQtSDQvtCx0LvQvtC80LrQvtCyYCkge1xuXHRcdFx0XHRjb25zdCBzdHIgID0gJGltZy5wYXJlbnRFbGVtZW50IS5nZXRBdHRyaWJ1dGUoYG9ubW91c2VvdmVyYCkgfHwgYGAsXG5cdFx0XHRcdCAgICAgIHJFeHAgPSAvXi4r0KLQuNGC0LDQvTo8XFwvdGg+PHRoPiguKik8XFwvdGg+PFxcL3RyPjx0cj48dGg+0JrRgNC10LzQvdC40Lk6PFxcL3RoPjx0aD4oLiopPFxcL3RoPjxcXC90cj48dHI+LiskL2dtcztcblxuXHRcdFx0XHR0aXRhbml1bSA9IE51bWJlcihzdHIucmVwbGFjZShyRXhwLCAnJDEnKS5yZXBsYWNlKC9cXC4vLCAnJykpO1xuXHRcdFx0XHRzaWxpY29uID0gTnVtYmVyKHN0ci5yZXBsYWNlKHJFeHAsICckMicpLnJlcGxhY2UoL1xcLi8sICcnKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRsZXQgb2JqID0ge1xuXHRcdFx0eCAgICAgICAgICAgOiB4LFxuXHRcdFx0eSAgICAgICAgICAgOiB5LFxuXHRcdFx0eiAgICAgICAgICAgOiAkei50ZXh0Q29udGVudCxcblx0XHRcdHBsYW5ldF9uYW1lIDogJHRkWzJdLnRleHRDb250ZW50IS5yZXBsYWNlKGAqYCwgYGApLFxuXHRcdFx0cGxhbmV0X3NwYWNlOiBwbGFuZXRfc3BhY2Uuam9pbihgLCBgKSxcblx0XHRcdHRpdGFuaXVtICAgIDogdGl0YW5pdW0sXG5cdFx0XHRzaWxpY29uICAgICA6IHNpbGljb24sXG5cdFx0XHRwbGF5ZXIgICAgICA6ICR0ZFs0XS50ZXh0Q29udGVudCEsXG5cdFx0XHRhbGlhbmNlICAgICA6ICR0ZFs1XS50ZXh0Q29udGVudCFcblx0XHR9O1xuXG5cdFx0ZGF0YS5wdXNoKG9iaik7XG5cdH0pO1xuXG5cdGNvbnN0ICRnYWxheHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KGBbbmFtZT1nYWxheHldYCksXG5cdCAgICAgICRzeXN0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KGBbbmFtZT1zeXN0ZW1dYCksXG5cdCAgICAgICRuZXh0ICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbbmFtZT1zeXN0ZW1SaWdodF1gKTtcblx0aWYgKCRnYWxheHkgJiYgJHN5c3RlbSAmJiAkbmV4dCAmJiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGBnYWxheHktZ3JhYmApID09PSBudWxsKSB7XG5cdFx0Y29uc3QgJGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYGJ1dHRvbmApO1xuXHRcdCRidXR0b24udHlwZSA9IGBidXR0b25gO1xuXHRcdCRidXR0b24uaW5uZXJIVE1MID0gYGdyYWJgO1xuXHRcdCRuZXh0Lmluc2VydEFkamFjZW50RWxlbWVudChgYWZ0ZXJlbmRgLCAkYnV0dG9uKTtcblx0XHQkYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgZSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0c2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShgZ2FsYXh5LWdyYWJgLCBgMGApO1xuXHRcdFx0bG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0fSlcblx0fVxuXG5cdGZldGNoKGBodHRwOi8vZ29yc2FsZG8ub25saW5lL293YXJzL3NhdmUucGhwYCwge1xuXHRcdG1ldGhvZDogYHBvc3RgLFxuXHRcdGJvZHkgIDogSlNPTi5zdHJpbmdpZnkoZGF0YSlcblx0fSlcblx0XHQudGhlbihyID0+IHIuanNvbigpKVxuXHRcdC50aGVuKGRhdGEgPT4ge1xuXHRcdFx0Y29uc3QgdGltZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oYGdhbGF4eS1ncmFiYCk7XG5cdFx0XHRpZiAodGltZSAmJiAkZ2FsYXh5ICYmICRzeXN0ZW0gJiYgJG5leHQpIHtcblx0XHRcdFx0aWYgKCFkYXRhLmhhc093blByb3BlcnR5KGBzdWNjZXNzYCkpe1xuXHRcdFx0XHRcdGFsZXJ0KGDQn9Cw0YDRgdC40L3QsyDQvtCx0LvQvtC80LjQu9GB0Y9gKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoK3RpbWUgPiA3MCkge1xuXHRcdFx0XHRcdHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oYGdhbGF4eS1ncmFiYCwgYDBgKTtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpPT57XG5cdFx0XHRcdFx0XHRsb2NhdGlvbi5yZWxvYWQoKTtcblx0XHRcdFx0XHR9LCAzMDAwMCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oYGdhbGF4eS1ncmFiYCwgKHBhcnNlSW50KHRpbWUpICsgMSkudG9TdHJpbmcoKSk7XG5cblx0XHRcdFx0bGV0IGcgPSArJGdhbGF4eS52YWx1ZSxcblx0XHRcdFx0XHRzID0gKyRzeXN0ZW0udmFsdWUgKyAxO1xuXG5cdFx0XHRcdGlmIChzID4gNDk5KSB7XG5cdFx0XHRcdFx0cyA9IDE7XG5cdFx0XHRcdFx0Zys9IDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGcgPiAxNSl7XG5cdFx0XHRcdFx0c2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgZ2FsYXh5LWdyYWJgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkZ2FsYXh5LnZhbHVlID0gZy50b1N0cmluZygpO1xuXHRcdFx0XHQkc3lzdGVtLnZhbHVlID0gcy50b1N0cmluZygpO1xuXHRcdFx0XHQkbmV4dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChgY2xpY2tgKSk7XG5cdFx0XHR9XG5cblx0XHR9KVxufSkoKTtcblxuIl19
